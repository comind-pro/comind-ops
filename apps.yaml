# Comind-Ops Platform Applications Configuration
# This file defines all applications and their environment-specific settings
# Used by ArgoCD ApplicationSet for GitOps deployment

# Global Git repository configuration
repository:
  url: https://github.com/comind-pro/comind-ops
  branches:
    dev: main
    stage: main  
    prod: main
  path: k8s/apps

# Infrastructure services configuration
infrastructure:
  repository:
    url: https://github.com/comind-pro/comind-ops
    branch: main
    path: k8s
  services:
    - name: base
      path: k8s/base
      description: "Base Kubernetes resources (RBAC, namespaces, policies)"
    - name: platform
      path: k8s/platform
      description: "Platform services (ElasticMQ, Registry, etc.)"

# Applications
applications:
  # Sample Application
  sample-app:
    description: "Sample application demonstrating the comind-ops platform patterns"
    team: platform
    port: 8080
    repository:
      url: https://github.com/comind-pro/comind-ops
      path: k8s/apps/sample-app
    environments:
      dev:
        enabled: true
        branch: main
        hostname: sample-app.dev.127.0.0.1.nip.io
        replicas: 1
        resources:
          requests:
            cpu: 100m
            memory: 128Mi
          limits:
            cpu: 200m
            memory: 256Mi
        database:
          enabled: true
          type: postgresql
          name: sample_app_dev
        monitoring:
          enabled: true
      stage:
        enabled: false
        branch: main
        hostname: sample-app.stage.comind-ops.io
        replicas: 2
      prod:
        enabled: false
        branch: main
        hostname: sample-app.comind-ops.io
        replicas: 3
