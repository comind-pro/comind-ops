# Development environment configuration
# Monitoring Dashboard - Platform status and service access

# Global configuration
global:
  environment: dev
  domain: dev.127.0.0.1.nip.io
  
# Namespace
namespace: monitoring-dashboard-dev

# Application scaling
replicaCount: 1

# Container image configuration
image:
  repository: monitoring-dashboard
  pullPolicy: Never  # Use local image (imported into k3d cluster)
  tag: "dev"

# Code deployment method
useConfigMapCode: false  # Use Docker image instead of ConfigMap for code

# Service configuration
service:
  type: ClusterIP
  port: 80
  targetPort: 8080

# Ingress configuration
ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    nginx.ingress.kubernetes.io/enable-cors: "true"
  hosts:
    - host: monitoring.dev.127.0.0.1.nip.io
      paths:
        - path: /
          pathType: Prefix
        - path: /api
          pathType: Prefix
        - path: /health
          pathType: Prefix

# Resources (development values - more relaxed)
resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 64Mi

# Autoscaling disabled for development
autoscaling:
  enabled: false

# Persistence enabled but small
persistence:
  enabled: true
  size: 1Gi

# Environment variables
env:
  NODE_ENV: development
  PORT: "8080"
  LOG_LEVEL: debug
  APP_NAME: monitoring-dashboard
  APP_VERSION: "1.0.0"
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "false"
  ENABLE_DEBUG: "true"

# Platform service integrations (monitoring dashboard doesn't need database/queue/storage)
platformServices:
  database:
    enabled: false

  queue:
    enabled: false

  storage:
    enabled: false

  cache:
    enabled: false

# Monitoring configuration (ServiceMonitor requires Prometheus Operator)
monitoring:
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s

# Network policy (less restrictive for development)
networkPolicy:
  enabled: true
  policyTypes:
    - Ingress
    - Egress
  ingress:
    - from:
      - namespaceSelector:
          matchLabels:
            name: ingress-nginx
    - from:
      - namespaceSelector:
          matchLabels:
            name: monitoring-dashboard-dev
  egress:
    - to:
      - namespaceSelector:
          matchLabels:
            name: platform-dev
    - to: []
      ports:
      - protocol: UDP
        port: 53   # DNS

# Service Account
serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

# Pod Disruption Budget
podDisruptionBudget:
  enabled: false  # Disabled for single replica

# Jobs configuration (disabled for monitoring dashboard)
jobs:
  - name: db-seed
    enabled: false
    image: postgres:15-alpine
    restartPolicy: OnFailure
    backoffLimit: 3
