# ElasticMQ Helm Values for Staging Environment

global:
  namespace: platform-stage
  domain: "stage.127.0.0.1.nip.io"

image:
  repository: softwaremill/elasticmq
  tag: "1.5.7"
  pullPolicy: IfNotPresent

replicaCount: 1

service:
  type: ClusterIP
  sqs:
    port: 9324
  web:
    port: 9325

ingress:
  enabled: true
  className: nginx
  host: elasticmq.stage.127.0.0.1.nip.io
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"

resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "1Gi"
    cpu: "500m"

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true

# ElasticMQ Configuration for staging (more conservative settings)
config:
  queues:
    - name: default
      defaultVisibilityTimeout: "30 seconds"
      delay: "5 seconds"
      receiveMessageWait: "0 seconds"
      deadLettersQueue:
        name: "default-dlq"
        maxReceiveCount: 3
    - name: high-priority
      defaultVisibilityTimeout: "15 seconds"
      delay: "0 seconds"
      receiveMessageWait: "0 seconds"
    - name: notifications
      defaultVisibilityTimeout: "60 seconds"
      delay: "0 seconds"
      receiveMessageWait: "0 seconds"
      deadLettersQueue:
        name: "notifications-dlq"
        maxReceiveCount: 5
    - name: default-dlq
      defaultVisibilityTimeout: "60 seconds"
    - name: notifications-dlq
      defaultVisibilityTimeout: "60 seconds"

nodeSelector: {}
tolerations: []
affinity: {}

monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
